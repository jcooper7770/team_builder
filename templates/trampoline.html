{% extends "base.html" %}

{% block content %}
<div class="form-group" align="center">
<table align="center">
<tr><td>
<form action="{{ url_for('trampoline_log') }}" method="post" id="logger" style="text-align:left;">

<!-- Username -->
<div class="form-row">
<div class="col">
<label for="name">Username:</label>
</div>
<div class="col">
{% if user == "" %}
<input type="text" id="name" name="name" placeholder="new username" value="{{username}}" class="form-control"><br>
{% else %}
<input type="text" id="name" name="name" placeholder="new username" value="{{user}}" class="form-control" disabled><br>
{% endif %}
</div>
</div>

<!-- Event to be logged -->
<div class="form-row">
<div class="col">
Event:&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</div>
<div class="col">
<select name="event" id="event">
  <option value="trampoline"{% if event=="trampoline" %} selected{% endif %}>Trampoline</option>
  <option value="dmt"{% if event=="dmt" %} selected{% endif %}>Double Mini</option>
</select><br>
</div>
</div>

<!-- Skills to be logged -->
<div class="form-row">
<div class="col">
<textarea id="log" name="log" rows="10" cols="50" form="logger" placeholder="Input your routines here">{{routine_text}}</textarea>
</div>
</div>
<br>

<!-- Notes -->
<div class="form-row">
<div class="col">
Notes:
</div>
<div class=col">
<input type="text" id="notes" name="notes" value="">
</div>
</div>

<br>
<button type="submit" class="btn btn-primary">Submit</button>
</form>
</div>

<!--- Deleting past data --->
<form method="post" id="clear-form" style='text-align:left;'>
<button type="submit" id="delete-button" class="btn btn-danger">Delete Historical Data</button>
<button id="delete-day-button" class="btn btn-danger">Delete Today's Data</button>
</form>
</td></tr>
</table>

<script src="https://code.jquery.com/jquery-3.5.1.js"
          integrity="sha256-QWo7LDvxbWT2tbbQ97B53yJnYU3WhH/C8ycbRAkjPDc="
          crossorigin="anonymous"></script>
 
  <script type="text/javascript">
    $("#delete-button").click(function(e){
    	e.preventDefault();
    	$.ajax({
      		type: 'GET',
      		url: "/logger/_clear",
      		success: function(data){
                 alert("Deleted data");
         	}
    	});
    });

    $("#delete-day-button").click(function(e){
    $.ajax({
      type: 'GET',
      url: "/logger/_clearDay",
      success: function(data){
                 alert("Deleted data");
               }
    });
    });
</script>



<!-- Goals -->
<br><br>
<div class="container">
<form action="{{ url_for('trampoline_log') }}" method="post" id="goals" style="text-align:left;">
<input type="hidden" name="goals_form" id="goals_form" value="goals_form" \>
<table align="center" width="30%" border=1 class="table table-striped">
<thead class="thead-dark"><th colspan=3 >Goals</th></thead>
  <tbody>
  <tr>
    <td colspan=3>
      <input type="text" name="goal_string" id="goal_string" placeholder="Write goal here" size=100 \>
      <button type="submit" class="btn btn-primary">Submit Goal</button>
    </td>
  </tr>

  {% for goal in goals %}
  <tr>
    <td width="5%" >
      {% if goal.done %}
      <input type="checkbox" id="{{ loop.index0 }}" name="{{ loop.index0 }}" checked \>
      {% else %}
      <input type="checkbox" id="{{ loop.index0 }}" name="{{ loop.index0 }}"  \>
      {% endif %}
    </td>
    <td>{{ goal.goal }}</td>
    <td width="5%">
    <button type="submit" id="delete{{ loop.index0 }}" name="delete{{ loop.index0 }}" class="btn btn-danger">Delete</button>
    </td>
  </tr>
  {% endfor %}
  
</tbody>
</table>
</div>

<br><br>
{{body|safe}}
<br>

<br><br><br>

<!-- Index for tables -->
<div class="container">
<table align='center' border=1 style='background-color:#FFFFFF;'>
<tr>
<th align='center' colspan=9>Index</th>
</tr>
<tr>
  <td>Skill 1</td>
  <td>Skill 2</td>
  <td></td>
  <td># skills in this turn</td>
  <td># flips in this turn</td>
  <td># total skills in practice</td>
  <td># total flips in practice</td>
  <td>DoD for turn</td>
  <td>total DoD for practice</td>
</tr>
</table>
</div>


{% endblock %}
