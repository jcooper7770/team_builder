{% extends "pokemon_base.html" %}

{% block content %}
<!-- Settings -->
<br><br>
<div class="container">
  <div class="card border-primary">
    <div class="card-header text-center">
      <h2>User Settings for {{user}}</h2>
    </div>
    <div class="row card-body">
      <div class="col-sm">
        <form action="/pokemon/user/update" method="POST">
          <div class="row">
            <div class="col-sm-2">
            </div>
            <div class="col-sm-10">
            </div>
          </div>
          <div class="row">
            <div class="col-sm-2">
              <label for="league">Preferred League/Cup:</label>
            </div>
            <div class="col-sm-10">
              <input type="text" value="{{userObj.fav_league}}" class="form-control" name="league"><br>
            </div>
          </div>
          <div class="row">
            <div class="col-sm-2">
              <label for="team">Favorite Teams:</label>
              <a id="add-team"><i class="fa fa-plus-circle" aria-hidden="true"></i></a>
            </div>
            <div class="col-sm-10">
              <div id="team-inputs">
                {% for team in userObj.teams %}
                <input id="teams" type="text" value="{{team|safe}}" class="form-control" name="team-{{loop.index}}">
                {% endfor %}
              </div>
            </div>
          </div>
          <div class="row">
            <div class="col">
              <button type="submit" class="btn btn-primary">Save</button>
            </div>
          </div>
        </form>
        <br>
      </div>
    </div>
  </div>
</div>

<br><br>

<script src="https://code.jquery.com/jquery-3.5.1.js" integrity="sha256-QWo7LDvxbWT2tbbQ97B53yJnYU3WhH/C8ycbRAkjPDc="
  crossorigin="anonymous"></script>

<script type="text/javascript">
//document.getElementById("teams").value = "{{userObj.teams|safe}}";
$("#add-team").click(function(e){
  alert("adding a team");
  var all_inputs = document.getElementById("team-inputs");
  var num_teams = all_inputs.childNodes.length - 2;

  var input = document.createElement("input");
  input.type = "text";
  input.name = "team-"+num_teams;
  input.className = "form-control";
  input.value = "{{userObj.teams|safe}}";

  all_inputs.appendChild(input);

});
</script>
{% endblock %}